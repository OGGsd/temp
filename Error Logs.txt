Starting Container

2025-08-24T13:08:01.299050Z [debug    ] Logger set up with log level: debug


- Initializing Axie Studio...
+ Initializing Axie Studio


\ Checking Environment...
+ Checking Environment


| Starting Core Services...2025-08-24T13:08:01.601302Z [debug    ] Logger set up with log level: debug


/ Starting Core Services...
+ Starting Core Services


- Connecting Database...
+ Connecting Database


\ Loading Components...
+ Loading Components


| Adding Starter Projects...
+ Adding Starter Projects


/ Launching Axie Studio...2025-08-24T13:08:02.646697Z [debug    ] Logger set up with log level: debug


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...Starting user table migration...

Added signup_ip column

Created signup_ip index

Added device_fingerprint column

Created device_fingerprint index

User table migration completed successfully

Starting email verification and security fields migration...

✅ Added email_verified column

✅ Added email_verification_token column

✅ Added email_verification_expires column

✅ Added verification_code column

✅ Added verification_code_expires column

✅ Added verification_attempts column

✅ Added login_attempts column

✅ Added locked_until column

✅ Added last_login_ip column

✅ Added password_changed_at column

✅ Added failed_login_attempts column

✅ Added last_failed_login column

Email verification and security fields migration completed! Added 12 new columns.

Setting default values for existing users...

✅ Set default values for existing users


- Stopping Server...
- Launching Axie Studio...
+ Stopping Server (0.10s)


\ Cancelling Background Tasks...
\ Launching Axie Studio...
+ Cancelling Background Tasks


| Cleaning Up Services...
| Launching Axie Studio...
x Cleaning Up Services

   Error: Could not remove default superuser.

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    result = self.await_(self._cursor.execute(query, params, **kw))

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

            ^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

    raise ex.with_traceback(None)

psycopg.errors.UndefinedColumn: column user.email does not exist

LINE 1: SELECT "user".id, "user".username, "user".email, "user".pass...

                                           ^

 

The above exception was the direct cause of the following exception:

 

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/services/utils.py", line 109, in teardown_superuser

    result = await session.exec(stmt)

             ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlmodel/ext/asyncio/session.py", line 81, in exec

    result = await greenlet_spawn(

[SQL: SELECT "user".id, "user".username, "user".email, "user".password, "user".profile_image, "user".is_active, "user".is_superuser, "user".create_at, "user".updated_at, "user".last_login_at, "user".signup_ip, "user".device_fingerprint, "user".email_verified, "user".email_verification_token, "user".email_verification_expires, "user".verification_code, "user".verification_code_expires, "user".verification_attempts, "user".login_attempts, "user".locked_until, "user".last_login_ip, "user".password_changed_at, "user".failed_login_attempts, "user".last_failed_login, "user".stripe_customer_id, "user".subscription_status, "user".subscription_id, "user".trial_start, "user".trial_end, "user".subscription_start, "user".subscription_end, "user".store_api_key, "user".optins 

FROM "user" 

WHERE "user".username = %(username_1)s::VARCHAR]

[parameters: {'username_1': 'axiestudio'}]

(Background on this error at: https://sqlalche.me/e/20/f405)

             ^^^^^^^^^^^^^^^^^^^^^

 

The above exception was the direct cause of the following exception:

 

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 692, in lifespan

    async with self.lifespan_context(app) as maybe_state:

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn

               ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__

    result = context.throw(*sys.exc_info())

    return await anext(self.gen)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

           ^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi_pagination/api.py", line 347, in lifespan

    async with _original_lifespan_context(app) as maybe_state:

  File "/app/.venv/lib/python3.12/site-packages/sqlmodel/orm/session.py", line 66, in exec

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__

    results = super().execute(

    return await anext(self.gen)

           ^^^^^^^^^^^^^^^^^^^^^

              ^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 133, in merged_lifespan

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute

    async with original_context(app) as maybe_original_state:

               ^^^^^^^^^^^^^^^^^^^^^

    return self._execute_internal(

  File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__

    return await anext(self.gen)

           ^^^^^^^^^^^^^^^^^^^^^^^

           ^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 133, in merged_lifespan

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal

    async with original_context(app) as maybe_original_state:

    result: Result[Any] = compile_state_cls.orm_execute_statement(

               ^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__

                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    return await anext(self.gen)

           ^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 133, in merged_lifespan

    async with original_context(app) as maybe_original_state:

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement

               ^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 210, in __aenter__

    result = conn.execute(

    return await anext(self.gen)

             ^^^^^^^^^^^^^

           ^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 167, in lifespan

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

    await initialize_services(fix_migration=fix_migration)

    return meth(

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/services/utils.py", line 232, in initialize_services

    await setup_superuser(settings_service, session)

           ^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/services/utils.py", line 76, in setup_superuser

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

    await teardown_superuser(settings_service, session)

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/services/utils.py", line 122, in teardown_superuser

    return connection._execute_clauseelement(

    raise RuntimeError(msg) from exc

RuntimeError: Could not remove default superuser.

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

 

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

Application startup failed. Exiting.

    ret = self._execute_context(

          ^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

    return self._exec_single_context(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

    self._handle_dbapi_exception(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    result = self.await_(self._cursor.execute(query, params, **kw))

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

            ^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

    raise ex.with_traceback(None)

sqlalchemy.exc.ProgrammingError: (psycopg.errors.UndefinedColumn) column user.email does not exist

LINE 1: SELECT "user".id, "user".username, "user".email, "user".pass...

                                           ^


/ Launching Axie Studio...2025-08-24T13:08:15.793933Z [error    ] Worker (pid:121) exited with code 3

2025-08-24T13:08:15.794747Z [error    ] Shutting down: Master         

2025-08-24T13:08:15.794910Z [error    ] Reason: Worker failed to boot.


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...


| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...
- Launching Axie Studio...
\ Launching Axie Studio...
| Launching Axie Studio...
/ Launching Axie Studio...


- Launching Axie Studio...
\ Launching Axie Studio...
| Launch