 14:31:28] DEBUG    2025-08-22 14:31:28 - DEBUG    -      manager.py:55

                             manager - Create service                           

                             ServiceType.CHAT_SERVICE                           

[08/22/25 14:31:42] INFO     2025-08-22 14:31:42 -     email_verification.py:537

                             INFO     -                                         

                             email_verification - üîÑ                            

                             Resend code request for                            

                             email:                                             

                             stefanjohnmiranda3@gmail.                          

                             com                                                

                    WARNING  2025-08-22 14:31:42 -     email_verification.py:544

                             WARNING  -                                         

                             email_verification - ‚ùå                            

                             Resend code requested for                          

                             non-existent email:                                

                             stefanjohnmiranda3@gmail.                          

                             com                                                

[08/22/25 14:33:21] DEBUG    2025-08-22 14:33:21 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             df46527a892f7e8d                                   

[08/22/25 14:33:22] INFO     2025-08-22 14:33:22 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 170,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_4_tim                        

                             es'], 'message': 'Account                          

                             creation blocked due to                            

                             high abuse risk. Please                            

                             contact support.',                                 

                             'details': {'email_check':                         

                             False, 'ip_usage_count': 1,                        

                             'device_usage_count': 4,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:33:22 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=stefanjohnmiranda3@gm                        

                             ail.com, ip=193.10.211.8,                          

                             fingerprint=df46527a892f7e8                        

                             d, success=False,                                  

                             risk_score=170                                     

[08/22/25 14:33:23] DEBUG    2025-08-22 14:33:23 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             df46527a892f7e8d                                   

                    INFO     2025-08-22 14:33:23 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 170,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_4_tim                        

                             es'], 'message': 'Account                          

                             creation blocked due to                            

                             high abuse risk. Please                            

                             contact support.',                                 

                             'details': {'email_check':                         

                             False, 'ip_usage_count': 1,                        

                             'device_usage_count': 4,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:33:23 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=stefanjohnmiranda3@gm                        

                             ail.com, ip=193.10.211.8,                          

                             fingerprint=df46527a892f7e8                        

                             d, success=False,                                  

                             risk_score=170                                     

[08/22/25 14:33:25] DEBUG    2025-08-22 14:33:25 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             df46527a892f7e8d                                   

                    INFO     2025-08-22 14:33:25 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 170,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_4_tim                        

                             es'], 'message': 'Account                          

                             creation blocked due to                            

                             high abuse risk. Please                            

                             contact support.',                                 

                             'details': {'email_check':                         

                             False, 'ip_usage_count': 1,                        

                             'device_usage_count': 4,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:33:25 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=stefanjohnmiranda3@gm                        

                             ail.com, ip=193.10.211.8,                          

                             fingerprint=df46527a892f7e8                        

                             d, success=False,                                  

                             risk_score=170                                     

[08/22/25 14:33:29] DEBUG    2025-08-22 14:33:29 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             df46527a892f7e8d                                   

                    INFO     2025-08-22 14:33:29 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 170,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_4_tim                        

                             es'], 'message': 'Account                          

                             creation blocked due to                            

                             high abuse risk. Please                            

                             contact support.',                                 

                             'details': {'email_check':                         

                             False, 'ip_usage_count': 1,                        

                             'device_usage_count': 4,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:33:29 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=stefanjohnmiranda3@gm                        

                             ail.com, ip=193.10.211.8,                          

                             fingerprint=df46527a892f7e8                        

                             d, success=False,                                  

                             risk_score=170                                     

[08/22/25 14:34:12] DEBUG    2025-08-22 14:34:12 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             946afc96850360f8                                   

                    INFO     2025-08-22 14:34:12 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 110,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_2_tim                        

                             es'], 'message': 'Account                          

                             creation temporarily                               

                             restricted. Please try                             

                             again later or contact                             

                             support.', 'details':                              

                             {'email_check': False,                             

                             'ip_usage_count': 1,                               

                             'device_usage_count': 2,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:34:12 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             946afc96850360f8                                   

                    INFO     2025-08-22 14:34:15 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 110,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_2_tim                        

                             es'], 'message': 'Account                          

                             creation temporarily                               

                             restricted. Please try                             

                             again later or contact                             

                             support.', 'details':                              

                             {'email_check': False,                             

                             'ip_usage_count': 1,                               

                             'device_usage_count': 2,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:34:15 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=stefanjohnmiranda3@gm                        

                             ail.com, ip=193.10.211.8,                          

                             fingerprint=946afc96850360f                        

                             8, success=False,                                  

                             risk_score=110                                     

[08/22/25 14:34:19] DEBUG    2025-08-22 14:34:19 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             946afc96850360f8                                   

                    INFO     2025-08-22 14:34:19 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 110,                                 

                             'abuse_indicators':                                

                             ['ip_recently_used_1_times'                        

                             ,                                                  

                             'device_recently_used_2_tim                        

                             es'], 'message': 'Account                          

                             creation temporarily                               

                             restricted. Please try                             

                             again later or contact                             

                             support.', 'details':                              

                             {'email_check': False,                             

                             'ip_usage_count': 1,                               

                             'device_usage_count': 2,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:34:19 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=stefanjohnmiranda3@gm                        

                             ail.com, ip=193.10.211.8,                          

                             fingerprint=946afc96850360f                        

                             8, success=False,                                  

                             risk_score=110                                     

[08/22/25 14:34:43] INFO     2025-08-22 14:34:43 - INFO     - utils utils.py:464

                             - Successful login for user:                       

                             stefan@axiestudio.se from IP:                      

                             100.64.0.3                                         

                    DEBUG    2025-08-22 14:34:43 - DEBUG    -      service.py:52

                             service - Processed OPENAI_API_KEY                 

                             variable from environment.                         

                    DEBUG    2025-08-22 14:34:43 - DEBUG    - local  local.py:67

                             - File 046-rocket.svg retrieved                    

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:43 - DEBUG    - local  local.py:67

                             - File People Avatar-01-14.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

[08/22/25 14:34:48] INFO     2025-08-22 14:34:48 - INFO     - local  local.py:96

                             - Listed 54 files in flow                          

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    INFO     2025-08-22 14:34:48 - INFO     - local  local.py:96

                             - Listed 25 files in flow                          

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-11.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-19.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-20.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-13.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-06.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-05.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             - File People Avatar-01-23.svg                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             - File 031-planet.svg retrieved                    

                             successfully from flow                             

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/Space.                                       

                             - File 030-books.svg retrieved                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-19.svg                     

                             retrieved successfully from flow                   

                             - File People Avatar-01-07.svg                     

                             - File People Avatar-02-01.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             - File People Avatar-02-27.svg                     

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                             tures/People.                                      

                             tures/People.                                      

                             - File People Avatar-02-08.svg                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                             - File People Avatar-02-13.svg                     

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             - File People Avatar-02-07.svg                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                             - File People Avatar-02-15.svg                     

                             - File People Avatar-02-04.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-22.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic      



                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-02.svg                     

                             /app/data/.cache/axiestudio/profile_pic            

                             - File 029-telescope.svg retrieved                 

                             retrieved successfully from flow                   

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-26.svg                     

                             - File People Avatar-02-21.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             - File People Avatar-01-01.svg                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                             - File People Avatar-02-10.svg                     

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             - File People Avatar-02-17.svg                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-05.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-14.svg                     

                             - File People Avatar-01-24.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-10.svg                     

                             - File People Avatar-01-04.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             tures/People.                                      

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-16.svg                     

                             - File 043-space shuttle.svg retrieved             

                             - File People Avatar-01-08.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                             tures/People.                                      

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-25.svg                     

                             - File 041-spaceship.svg retrieved                 

                             - File People Avatar-02-09.svg                     

                             retrieved successfully from flow                   

                             successfully from flow                             

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 035-globe.svg retrieved                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 038-eclipse.svg retrieved                   

                             successfully from flow                             

                             - File People Avatar-01-16.svg                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             - File 044-rocket.svg retrieved                    

                             - File 036-eclipse.svg retrieved                   

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             successfully from flow                             

                             successfully from flow                             

                             - File People Avatar-01-09.svg                     

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/Space.                                       

                             tures/People.                                      

                             - File 048-satellite.svg retrieved                 

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             successfully from flow                             

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             - File 045-astronaut.svg retrieved                 

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-27.svg                     

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-20.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-26.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 046-rocket.svg retrieved                    

                             tures/Space.                                       

                             successfully from flow                             

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             - File People Avatar-01-15.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/Space.                                       

                             - File People Avatar-02-18.svg                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             successfully from flow                             

                             - File 034-alien.svg retrieved                     

                             - File 033-planet.svg retrieved                    

                             /app/data/.cache/axiestudio/profile_pic            

                             successfully from flow                             

                             successfully from flow                             

                             tures/Space.                                       

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/Space.                                       

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-06.svg                     

                             - File 032-constellation.svg retrieved             

                             - File People Avatar-02-03.svg                     

                             retrieved successfully from flow                   

                             successfully from flow                             

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             tures/Space.                                       

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-02.svg                     

                             - File People Avatar-02-25.svg                     

                             tures/Space.                                       

                             retrieved successfully from flow                   

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                             - File People Avatar-01-17.svg                     

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             tures/People.                                      

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             - File 039-Asteroid.svg retrieved                  

                             successfully from flow                             

                             - File People Avatar-01-03.svg                     

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             - File People Avatar-01-12.svg                     

                             tures/Space.                                       

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             - File 040-mission.svg retrieved                   

                             successfully from flow                             

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             - File 047-computer.svg retrieved                  

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 050-space robot.svg retrieved               

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-23.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-21.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 027-satellite.svg retrieved                 

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 026-alien.svg retrieved                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-18.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 037-meteor.svg retrieved                    

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-01-11.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 049-astronaut.svg retrieved                 

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File People Avatar-02-24.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:34:48 - DEBUG    - local  local.py:67

                             - File 042-space shuttle.svg retrieved             

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

[08/22/25 14:39:24] DEBUG    2025-08-22 14:39:24 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             e72dadac2fa001f7                                   

                    INFO     2025-08-22 14:39:24 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 130,                                 

                             'abuse_indicators':                                

                             ['email_already_used',                             

                             'device_recently_used_1_tim                        

                             es'], 'message': 'Account                          

                             creation temporarily                               

                             restricted. Please try                             

                             again later or contact                             

                             support.', 'details':                              

                             {'email_check': True,                              

                             'ip_usage_count': 0,                               

                             'device_usage_count': 1,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:39:24 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=demoemail1133@gmail.c                        

                             om, ip=212.25.138.246,                             

                             fingerprint=e72dadac2fa001f                        

                             7, success=False,                                  

                             risk_score=130                                     

[08/22/25 14:39:25] DEBUG    2025-08-22 14:39:25 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             e72dadac2fa001f7                                   

                    INFO     2025-08-22 14:39:25 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

                             abuse check result:                                

                             {'action': 'block',                                

                             'risk_score': 130,                                 

                             'abuse_indicators':                                

                             ['email_already_used',                             

                             'device_recently_used_1_tim                        

                             es'], 'message': 'Account                          

                             creation temporarily                               

                             restricted. Please try                             

                             again later or contact                             

                             support.', 'details':                              

                             {'email_check': True,                              

                             'ip_usage_count': 0,                               

                             'device_usage_count': 1,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:39:25 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=demoemail1133@gmail.c                        

                             om, ip=212.25.138.246,                             

                             fingerprint=e72dadac2fa001f                        

                             7, success=False,                                  

                             risk_score=130                                     

[08/22/25 14:39:27] DEBUG    2025-08-22 14:39:27 - DEBUG  abuse_prevention.py:79

                             - abuse_prevention -                               

                             Generated device                                   

                             fingerprint:                                       

                             e72dadac2fa001f7                                   

                    INFO     2025-08-22 14:39:27 - INFO  abuse_prevention.py:244

                             - abuse_prevention - Trial                         

  |   File "/app/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__

  |     raise BaseExceptionGroup(

  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)

  +-+---------------- 1 ----------------

    | Traceback (most recent call last):

    |   File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi

    |     result = await app(  # type: ignore[func-returns-value]

    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__

    |     return await self.app(scope, receive, send)

    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__

    |     await super().__call__(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__

    |     await self.middleware_stack(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    |     await self.app(scope, receive, _send)

    |   File "/app/.venv/lib/python3.12/site-packages/opentelemetry/instrumentation/asgi/__init__.py", line 745, in __call__

    |     await self.app(scope, otel_receive, otel_send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    |     await self.app(scope, receive, _send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    |     with recv_stream, send_stream, collapse_excgroups():

    |                                    ^^^^^^^^^^^^^^^^^^^^

    |   File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    |     self.gen.throw(value)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    |     response = await self.dispatch_func(request, call_next)

    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 432, in flatten_query_string_lists

    |     return await call_next(request)

    |            ^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    |     raise app_exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    |     await self.app(scope, receive_or_disconnect, send_no_error)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    |     with recv_stream, send_stream, collapse_excgroups():

    |                                    ^^^^^^^^^^^^^^^^^^^^

    |   File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    |     self.gen.throw(value)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    |     raise app_exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    |     await self.app(scope, receive_or_disconnect, send_no_error)

    |     response = await self.dispatch_func(request, call_next)

    |     await self.app(scope, receive_or_disconnect, send_no_error)

    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    |   File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 422, in check_boundary

    |     await self.simple_response(scope, receive, send, request_headers=headers)

    |     with recv_stream, send_stream, collapse_excgroups():

    |     return await call_next(request)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response

    |                                    ^^^^^^^^^^^^^^^^^^^^

    |            ^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    |     self.gen.throw(value)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    |     response = await self.dispatch_func(request, call_next)

    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 120, in dispatch

    |     response = await call_next(request)

    |                ^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    |     raise app_exc

    |     await self.app(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/axiestudio/middleware.py", line 59, in __call__

    |     await self.app(scope, wrapper, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__

    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

    |     await app(scope, receive, sender)

    |     await self.middleware_stack(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app

    |     await route.handle(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle

    |     await self.app(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app

    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    |     raise exc

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

    |     await app(scope, receive, sender)

    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app

    |     response = await f(request)

    |                ^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app

    |     raw_response = await run_endpoint_function(

    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function

    |     return await dependant.call(**values)

    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/axiestudio/api/v1/users.py", line 167, in add_user

    |     new_user = await _create_regular_user(user, request, session)

    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    |   File "/app/.venv/lib/python3.12/site-packages/axiestudio/api/v1/users.py", line 97, in _create_regular_user

    |     from axiestudio.services.settings import settings

    | ImportError: cannot import name 'settings' from 'axiestudio.services.settings' (/app/.venv/lib/python3.12/site-packages/axiestudio/services/settings/__init__.py)

    +------------------------------------

 

During handling of the above exception, another exception occurred:

 

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi

    result = await app(  # type: ignore[func-returns-value]

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__

    return await self.app(scope, receive, send)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__

    await super().__call__(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__

    await self.middleware_stack(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    await self.app(scope, receive, _send)

  File "/app/.venv/lib/python3.12/site-packages/opentelemetry/instrumentation/asgi/__init__.py", line 745, in __call__

    await self.app(scope, otel_receive, otel_send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    await self.app(scope, receive, _send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    with recv_stream, send_stream, collapse_excgroups():

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 432, in flatten_query_string_lists

    return await call_next(request)

           ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    raise app_exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    raw_response = await run_endpoint_function(

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    await wrap_app_handling_exceptions(app, request)(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    with recv_stream, send_stream, collapse_excgroups():

    raise exc

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__

                                   ^^^^^^^^^^^^^^^^^^^^

    await app(scope, receive, sender)

    await self.simple_response(scope, receive, send, request_headers=headers)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response

    response = await f(request)

               ^^^^^^^^^^^^^^^^

    await self.app(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/middleware.py", line 59, in __call__

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    await self.app(scope, wrapper, send)

    raise exc
                             'details': {'email_check':                         

                             True, 'ip_usage_count': 1,                         

                             'device_usage_count': 2,                           

                             'cooldown_days': 30}}                              

                    INFO     2025-08-22 14:39:54 - INFO  abuse_prevention.py:258

                             - abuse_prevention - Signup                        

                             attempt logged:                                    

                             email=digitalspace5554@gmai                        

                             l.com, ip=212.25.138.246,                          

                             fingerprint=e72dadac2fa001f                        

                             7, success=False,                                  

                             risk_score=210                                     

[08/22/25 14:40:27] INFO     2025-08-22 14:40:27 - INFO     - utils utils.py:464

                             - Successful login for user:                       

                             stefan@axiestudio.se from IP:                      

                             100.64.0.7                                         

                    DEBUG    2025-08-22 14:40:27 - DEBUG    -      service.py:52

                             service - Processed OPENAI_API_KEY                 

                             variable from environment.                         

                    DEBUG    2025-08-22 14:40:27 - DEBUG    - local  local.py:67

                             - File 046-rocket.svg retrieved                    

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:27 - DEBUG    - local  local.py:67

                             - File People Avatar-01-14.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

[08/22/25 14:40:33] INFO     2025-08-22 14:40:33 - INFO     - local  local.py:96

                             - Listed 54 files in flow                          

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    INFO     2025-08-22 14:40:33 - INFO     - local  local.py:96

                             - Listed 25 files in flow                          

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-19.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-11.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-20.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             - File People Avatar-02-22.svg                     

                             - File People Avatar-01-22.svg                     

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-08.svg                     

                             - File People Avatar-01-20.svg                     

                             /app/data/.cache/axiestudio/profile_pic            

                             - File People Avatar-01-05.svg                     

                             retrieved successfully from flow                   

                             tures/People.                                      

                             - File People Avatar-02-12.svg                     

                             retrieved successfully from flow                   

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             - File People Avatar-01-27.svg                     

                             - File People Avatar-01-13.svg                     

                             tures/People.                                      

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             retrieved successfully from flow                   

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-15.svg                     

                             - File People Avatar-02-26.svg                     

                             retrieved successfully from flow                   

                             - File People Avatar-02-13.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             tures/People.                                      

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-04.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-24.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-05.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-06.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-04.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-02.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-10.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-09.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-17.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-16.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-06.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-07.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-23.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-26.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-21.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-07.svg                     
                             /app/data/.cache/axiestudio/profile_pic            

                             - File 046-rocket.svg retrieved                    

                             - File 042-space shuttle.svg retrieved             

                             tures/People.                                      

                             successfully from flow                             

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             - File People Avatar-02-27.svg                     

                             retrieved successfully from flow                   

                             tures/Space.                                       

                             /app/data/.cache/axiestudio/profile_pic            

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             tures/People.                                      

                             - File 050-space robot.svg retrieved               

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             successfully from flow                             

                             - File People Avatar-01-17.svg                     

                             - File 027-satellite.svg retrieved                 

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             retrieved successfully from flow                   

                             - File 026-alien.svg retrieved                     

                             successfully from flow                             

                             tures/Space.                                       

                             /app/data/.cache/axiestudio/profile_pic            

                             /app/data/.cache/axiestudio/profile_pic            

                             successfully from flow                             

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                             tures/Space.                                       

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 049-astronaut.svg retrieved                 

                             - File People Avatar-02-08.svg                     

                             successfully from flow                             

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-02.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 039-Asteroid.svg retrieved                  

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 035-globe.svg retrieved                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-14.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-01.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-11.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 028-alien.svg retrieved                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-03.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 032-constellation.svg retrieved             

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 044-rocket.svg retrieved                    

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 036-eclipse.svg retrieved                   

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 029-telescope.svg retrieved                 

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 037-meteor.svg retrieved                    

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 040-mission.svg retrieved                   

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 045-astronaut.svg retrieved                 

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-24.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-01-15.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 034-alien.svg retrieved                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 030-books.svg retrieved                     

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-18.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File 031-planet.svg retrieved                    

                             successfully from flow                             

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/Space.                                       

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-03.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                                      

                    DEBUG    2025-08-22 14:40:33 - DEBUG    - local  local.py:67

                             - File People Avatar-02-23.svg                     

                             retrieved successfully from flow                   

                             /app/data/.cache/axiestudio/profile_pic            

                             tures/People.                             
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn

    with recv_stream, send_stream, collapse_excgroups():

    result = context.switch(value)

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

             ^^^^^^^^^^^^^^^^^^^^^

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2032, in commit

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    trans.commit(_to_root=True)

    raise exc

  File "<string>", line 2, in commit

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go

    response = await self.dispatch_func(request, call_next)

    ret_value = fn(self, *arg, **kw)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

                ^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 422, in check_boundary

    self._prepare_impl()

    return await call_next(request)

  File "<string>", line 2, in _prepare_impl

           ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    ret_value = fn(self, *arg, **kw)

    raise app_exc

                ^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    self.session.flush()

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush

    await self.app(scope, receive_or_disconnect, send_no_error)

    self._flush(objects)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    with recv_stream, send_stream, collapse_excgroups():

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 120, in dispatch

    response = await call_next(request)

               ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    raise app_exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__

    await self.simple_response(scope, receive, send, request_headers=headers)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response

    await self.app(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/middleware.py", line 59, in __call__

    await self.app(scope, wrapper, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__

    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

    await app(scope, receive, sender)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__

    await self.middleware_stack(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app

    await route.handle(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle

    await self.app(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app

    await wrap_app_handling_exceptions(app, request)(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

    await app(scope, receive, sender)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app

    response = await f(request)

               ^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush

    with util.safe_reraise():

         ^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__

    raise exc_value.with_traceback(exc_tb)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush

    flush_context.execute()

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 463, in execute

    n.execute_aggregate(self, set_)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 567, in execute_aggregate

    self.execute(uow)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 679, in execute

    util.preloaded.orm_persistence.delete_obj(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 193, in delete_obj

    _emit_delete_statements(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1465, in _emit_delete_statements

    c = connection.execute(

        ^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

    return meth(

           ^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

    return connection._execute_clauseelement(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

    ret = self._execute_context(

          ^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

    return self._exec_single_context(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

    self._handle_dbapi_exception(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    result = self.await_(self._cursor.execute(query, params, **kw))

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

            ^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

    raise ex.with_traceback(None)

sqlalchemy.exc.IntegrityError: (psycopg.errors.ForeignKeyViolation) update or delete on table "user" violates foreign key constraint "fk_file_user_id_user" on table "file"

DETAIL:  Key (id)=(3dbec8cc-660d-4e04-b000-8acf1056c805) is still referenced from table "file".

[SQL: DELETE FROM "user" WHERE "user".id = %(id)s::UUID]

[parameters: {'id': UUID('3dbec8cc-660d-4e04-b000-8acf1056c805')}]

(Background on this error at: https://sqlalche.me/e/20/gkpj)

 

During handling of the above exception, another exception occurred:

 

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi

    result = await app(  # type: ignore[func-returns-value]

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__

    return await self.app(scope, receive, send)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__

    await super().__call__(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__

    await self.middleware_stack(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    await self.app(scope, receive, _send)

  File "/app/.venv/lib/python3.12/site-packages/opentelemetry/instrumentation/asgi/__init__.py", line 745, in __call__

    await self.app(scope, otel_receive, otel_send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 177, in __call__

    response = await self.handler(request, exc)

                             (id)=(3dbec8cc-660d-4e04-b000-8acf10               

psycopg.errors.ForeignKeyViolation: update or delete on table "user" violates foreign key constraint "fk_file_user_id_user" on table "file"

                             56c805) is still referenced from                   

DETAIL:  Key (id)=(3dbec8cc-660d-4e04-b000-8acf1056c805) is still referenced from table "file".

                             table "file".                                      

 

                             [SQL: DELETE FROM "user" WHERE                     

The above exception was the direct cause of the following exception:

                             "user".id = %(id)s::UUID]                          

                                                                                

 

                             (Background on this error at:                      

Traceback (most recent call last):

                             https://sqlalche.me/e/20/gkpj)                     
    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 422, in check_boundary

    return await call_next(request)

           ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    self._prepare_impl()

    raise app_exc

  File "/app/.venv/lib/python3.12/site-packages/loguru/_logger.py", line 2090, in error

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__

  File "<string>", line 2, in _prepare_impl

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    __self._log("ERROR", False, __self._options, __message, args, kwargs)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go

    return await self.app(scope, receive, send)

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/loguru/_logger.py", line 2055, in _log

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    ret_value = fn(self, *arg, **kw)

    log_record["message"] = message.format(*args, **kwargs)

  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__

    with recv_stream, send_stream, collapse_excgroups():

                ^^^^^^^^^^^^^^^^^^^^

                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

                                   ^^^^^^^^^^^^^^^^^^^^

    await super().__call__(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl

KeyError: "'id'"

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__

    self.session.flush()

    self.gen.throw(value)

    await self.middleware_stack(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    self._flush(objects)

    raise exc

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    with util.safe_reraise():

    response = await self.dispatch_func(request, call_next)

    await self.app(scope, receive, _send)

         ^^^^^^^^^^^^^^^^^^^

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/opentelemetry/instrumentation/asgi/__init__.py", line 745, in __call__

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 120, in dispatch

    await self.app(scope, otel_receive, otel_send)

    response = await call_next(request)

    raise exc_value.with_traceback(exc_tb)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush

               ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 177, in __call__

    flush_context.execute()

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    response = await self.handler(request, exc)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 463, in execute

    raise app_exc

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    n.execute_aggregate(self, set_)

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 468, in exception_handler

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 567, in execute_aggregate

    await self.app(scope, receive_or_disconnect, send_no_error)

    logger.error(f"unhandled error: {exc}", exc_info=exc)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__

    self.execute(uow)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 679, in execute

    await self.simple_response(scope, receive, send, request_headers=headers)

    util.preloaded.orm_persistence.delete_obj(

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 193, in delete_obj

    await self.app(scope, receive, send)

    _emit_delete_statements(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1465, in _emit_delete_statements

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/middleware.py", line 59, in __call__

    c = connection.execute(

    await self.app(scope, wrapper, send)

        ^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)

    return meth(

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

           ^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

    raise exc

    return connection._execute_clauseelement(

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    await app(scope, receive, sender)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__

    ret = self._execute_context(

    await self.middleware_stack(scope, receive, send)

          ^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

    await route.handle(scope, receive, send)

    return self._exec_single_context(

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle

    await self.app(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app

           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

    self._handle_dbapi_exception(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

    await wrap_app_handling_exceptions(app, request)(scope, receive, send)

    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    self.dialect.do_execute(

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    await app(scope, receive, sender)

    result = self.await_(self._cursor.execute(query, params, **kw))

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    response = await f(request)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

               ^^^^^^^^^^^^^^^^

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

    raw_response = await run_endpoint_function(

            ^^^^^^^^^^^^

                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function

    raise ex.with_traceback(None)

sqlalchemy.exc.OperationalError: (psycopg.errors.DeadlockDetected) deadlock detected

DETAIL:  Process 25861 waits for ShareLock on transaction 10303; blocked by process 24996.

Process 24996 waits for ShareLock on transaction 10304; blocked by process 25861.

HINT:  See server log for query details.

CONTEXT:  while deleting tuple (2,43) in relation "flow"

    return await dependant.call(**values)

[SQL: DELETE FROM flow WHERE flow.id = %(id)s::UUID]

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

[parameters: {'id': UUID('3034f170-e418-4888-9392-096d92dfd367')}]

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/api/v1/users.py", line 279, in delete_user

(Background on this error at: https://sqlalche.me/e/20/e3q8)

    await session.commit()

 

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1014, in commit

During handling of the above exception, another exception occurred:

    await greenlet_spawn(self.sync_session.commit)

 

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi

    result = await app(  # type: ignore[func-returns-value]

    result = context.switch(value)

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

             ^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2032, in commit

    trans.commit(_to_root=True)

  File "<string>", line 2, in commit

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go

    ret_value = fn(self, *arg, **kw)

                ^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit

                    ERROR    2025-08-22 14:41:05 - ERROR    -     service.py:194

                             service - Database error during                    

                             session scope:                                     
    await self.app(scope, wrapper, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__

    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    raise exc

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 432, in flatten_query_string_lists

    return await call_next(request)

           ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    raise app_exc

    trans.commit(_to_root=True)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

  File "<string>", line 2, in commit

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

    with recv_stream, send_stream, collapse_excgroups():

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go

                                   ^^^^^^^^^^^^^^^^^^^^

    ret_value = fn(self, *arg, **kw)

    await app(scope, receive, sender)

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

                ^^^^^^^^^^^^^^^^^^^^

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    self._prepare_impl()

    raise exc

    response = await f(request)

  File "<string>", line 2, in _prepare_impl

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go

    response = await self.dispatch_func(request, call_next)

    ret_value = fn(self, *arg, **kw)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 422, in check_boundary

    await app(scope, receive, sender)

    return await call_next(request)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__

           ^^^^^^^^^^^^^^^^^^^^^^^^

    await self.middleware_stack(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app

    return await dependant.call(**values)

    await route.handle(scope, receive, send)

    raise app_exc

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/api/v1/users.py", line 279, in delete_user

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn

    await self.app(scope, receive_or_disconnect, send_no_error)

    await session.commit()

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1014, in commit

    result = context.switch(value)

    with recv_stream, send_stream, collapse_excgroups():

    await greenlet_spawn(self.sync_session.commit)

                                   ^^^^^^^^^^^^^^^^^^^^

             ^^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

               ^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2032, in commit

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app

    self.gen.throw(value)

    raw_response = await run_endpoint_function(

                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__

    response = await self.dispatch_func(request, call_next)

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle

    await self.simple_response(scope, receive, send, request_headers=headers)

    await self.app(scope, receive, send)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response

  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app

    await self.app(scope, receive, send)

    await wrap_app_handling_exceptions(app, request)(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 120, in dispatch

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

    raise exc

    response = await call_next(request)

               ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    raise app_exc

                ^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl

    self.session.flush()

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush

    self._flush(objects)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush

    with util.safe_reraise():

         ^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__

    raise exc_value.with_traceback(exc_tb)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush

    flush_context.execute()

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 463, in execute

    n.execute_aggregate(self, set_)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 567, in execute_aggregate

    self.execute(uow)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 679, in execute

    util.preloaded.orm_persistence.delete_obj(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 193, in delete_obj

    _emit_delete_statements(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1465, in _emit_delete_statements

    c = connection.execute(

        ^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute

    return meth(

           ^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection

    return connection._execute_clauseelement(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement

    ret = self._execute_context(

          ^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context

    return self._exec_single_context(

           ^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context

    self._handle_dbapi_exception(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception

    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    result = self.await_(self._cursor.execute(query, params, **kw))

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

            ^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

    raise ex.with_traceback(None)

sqlalchemy.exc.IntegrityError: (psycopg.errors.ForeignKeyViolation) update or delete on table "user" violates foreign key constraint "fk_file_user_id_user" on table "file"

DETAIL:  Key (id)=(3dbec8cc-660d-4e04-b000-8acf1056c805) is still referenced from table "file".

[SQL: DELETE FROM "user" WHERE "user".id = %(id)s::UUID]

[parameters: {'id': UUID('3dbec8cc-660d-4e04-b000-8acf1056c805')}]

(Background on this error at: https://sqlalche.me/e/20/gkpj)

 

During handling of the above exception, another exception occurred:

 

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi

    result = await app(  # type: ignore[func-returns-value]

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__

    return await self.app(scope, receive, send)

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__

    await super().__call__(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__

    await self.middleware_stack(scope, receive, send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 187, in __call__

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    await self.app(scope, receive, _send)

  File "/app/.venv/lib/python3.12/site-packages/opentelemetry/instrumentation/asgi/__init__.py", line 745, in __call__

    await self.app(scope, otel_receive, otel_send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 177, in __call__

    response = await self.handler(request, exc)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 468, in exception_handler

    logger.error(f"unhandled error: {exc}", exc_info=exc)

  File "/app/.venv/lib/python3.12/site-packages/loguru/_logger.py", line 2090, in error

    __self._log("ERROR", False, __self._options, __message, args, kwargs)

  File "/app/.venv/lib/python3.12/site-packages/loguru/_logger.py", line 2055, in _log

    log_record["message"] = message.format(*args, **kwargs)

                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

KeyError: "'id'"

                    ERROR    2025-08-22 14:41:05 - ERROR    -     service.py:194

                             service - Database error during                    

                             session scope:                                     

                             (psycopg.errors.ForeignKeyViolation)               

                             update or delete on table "user"                   
      service - Database error during                    

                             session scope:                                     

                             (psycopg.errors.ForeignKeyViolation)               

                             update or delete on table "user"                   

                             violates foreign key constraint                    

                             "fk_file_user_id_user" on table                    

                             "file"                                             

                             DETAIL:  Key                                       

                             (id)=(3dbec8cc-660d-4e04-b000-8acf10               

                             56c805) is still referenced from                   

                             table "file".                                      

                             [SQL: DELETE FROM "user" WHERE                     

                             "user".id = %(id)s::UUID]                          

                                                                                

                             (Background on this error at:                      

                             https://sqlalche.me/e/20/gkpj)                     

Exception in ASGI application

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    result = self.await_(self._cursor.execute(query, params, **kw))

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

            ^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

    raise ex.with_traceback(None)

psycopg.errors.ForeignKeyViolation: update or delete on table "user" violates foreign key constraint "fk_file_user_id_user" on table "file"

DETAIL:  Key (id)=(3dbec8cc-660d-4e04-b000-8acf1056c805) is still referenced from table "file".

 

The above exception was the direct cause of the following exception:

 

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    await self.app(scope, receive, _send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    with recv_stream, send_stream, collapse_excgroups():

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 432, in flatten_query_string_lists

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    return await call_next(request)

           ^^^^^^^^^^^^^^^^^^^^^^^^

    with recv_stream, send_stream, collapse_excgroups():

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    raise app_exc

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

    return await call_next(request)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 422, in check_boundary

[08/22/25 14:41:06] ERROR    2025-08-22 14:41:06 - ERROR    -     service.py:194

                             service - Database error during                    

                             session scope:                                     

                             (psycopg.errors.ForeignKeyViolation)               

                             update or delete on table "user"                   

                             violates foreign key constraint                    

                             "fk_file_user_id_user" on table                    

                             "file"                                             

                             DETAIL:  Key                                       

                             (id)=(3dbec8cc-660d-4e04-b000-8acf10               

                             56c805) is still referenced from                   

                             table "file".                                      

                             [SQL: DELETE FROM "user" WHERE                     

                             "user".id = %(id)s::UUID]                          

                                                                                

                             (Background on this error at:                      

                             https://sqlalche.me/e/20/gkpj)                     

Exception in ASGI application

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context

    self.dialect.do_execute(

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute

    cursor.execute(statement, parameters)

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/psycopg.py", line 594, in execute

    result = self.await_(self._cursor.execute(query, params, **kw))

             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only

    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501

    raise app_exc

           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn

    value = await result

    await self.app(scope, receive_or_disconnect, send_no_error)

            ^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__

  File "/app/.venv/lib/python3.12/site-packages/psycopg/cursor_async.py", line 97, in execute

    await self.simple_response(scope, receive, send, request_headers=headers)

    raise ex.with_traceback(None)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response

psycopg.errors.ForeignKeyViolation: update or delete on table "user" violates foreign key constraint "fk_file_user_id_user" on table "file"

    await self.app(scope, receive, send)

DETAIL:  Key (id)=(3dbec8cc-660d-4e04-b000-8acf1056c805) is still referenced from table "file".

 

The above exception was the direct cause of the following exception:

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/middleware.py", line 59, in __call__

 

    await self.app(scope, wrapper, send)

Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__

    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)

    await self.app(scope, receive, _send)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    with recv_stream, send_stream, collapse_excgroups():

    raise exc

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 432, in flatten_query_string_lists

    return await call_next(request)

           ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    raise app_exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    with recv_stream, send_stream, collapse_excgroups():

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 422, in check_boundary

    return await call_next(request)

           ^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next

    raise app_exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro

    await self.app(scope, receive_or_disconnect, send_no_error)

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__

    with recv_stream, send_stream, collapse_excgroups():

                                   ^^^^^^^^^^^^^^^^^^^^

  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__

    self.gen.throw(value)

  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups

    raise exc

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__

    response = await self.dispatch_func(request, call_next)

               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  File "/app/.venv/lib/python3.12/site-packages/axiestudio/main.py", line 120, in dispatch

    response = await call_next(request)

               ^^^^^^^^^^^^^^^^^^^^^^^^